{"version":3,"sources":["webpack:///6a9d0c7773ed68bb83a8.worker.js","webpack:///webpack/bootstrap 6a9d0c7773ed68bb83a8","webpack:///./src/calc.worker.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","avg","arr","length","reduce","a","b","calcRgbaData","data","arguments","undefined","imageData","width","res","push","calcPixelData","rgbaData","size","colNum","Math","ceil","rowNum","height","j","startCol","startRow","squareData","filter","avgR","map","avgG","avgB","avgA","r","round","g","onmessage","e","pixelData","postMessage"],"mappings":"CAAS,SAAUA,SCInB,QAAAC,qBAAAC,UAGA,GAAAC,iBAAAD,UACA,MAAAC,kBAAAD,UAAAE,OAGA,IAAAC,QAAAF,iBAAAD,WACAI,EAAAJ,SACAK,GAAA,EACAH,WAUA,OANAJ,SAAAE,UAAAM,KAAAH,OAAAD,QAAAC,cAAAD,QAAAH,qBAGAI,OAAAE,GAAA,EAGAF,OAAAD,QAvBA,GAAAD,oBA4BAF,qBAAAQ,EAAAT,QAGAC,oBAAAS,EAAAP,iBAGAF,oBAAAU,EAAA,SAAAP,QAAAQ,KAAAC,QACAZ,oBAAAa,EAAAV,QAAAQ,OACAG,OAAAC,eAAAZ,QAAAQ,MACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,UAMAZ,oBAAAmB,EAAA,SAAAf,QACA,GAAAQ,QAAAR,eAAAgB,WACA,WAA2B,MAAAhB,QAAA,SAC3B,WAAiC,MAAAA,QAEjC,OADAJ,qBAAAU,EAAAE,OAAA,IAAAA,QACAA,QAIAZ,oBAAAa,EAAA,SAAAQ,OAAAC,UAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,OAAAC,WAGtDtB,oBAAAyB,EAAA,GAGAzB,wCAAA0B,EAAA,KDMM,SAAUtB,OAAQD,QAASH,qBAEjC,YE/DA,SAAS2B,KAAIC,KACX,MAAKA,MAAQA,IAAIC,OACVD,IAAIE,OAAO,SAACC,EAAGC,GAAJ,MAAUD,GAAIC,IAAKJ,IAAIC,OADT,EAIlC,QAASI,gBAIP,IAAK,GAJeC,MAAWC,UAAAN,OAAA,OAAAO,KAAAD,UAAA,GAAAA,UAAA,MACzBE,UAAYH,KAAKG,UACjBC,MAAYJ,KAAKI,MACjBC,OACGlC,EAAI,EAAGA,EAAIgC,UAAUR,OAAQxB,GAAK,EACrCA,EAAI,EAAIiC,OAAU,GACpBC,IAAIC,SAEND,IAAIA,IAAIV,OAAS,GAAGW,MAAMH,UAAUhC,GAAIgC,UAAUhC,EAAI,GAAIgC,UAAUhC,EAAI,GAAIgC,UAAUhC,EAAI,IAE5F,OAAOkC,KAGT,QAASE,eAAcP,KAAMQ,UAM3B,IAAK,GALCH,QACAI,KAAST,KAAKS,KACdC,OAASC,KAAKC,KAAKZ,KAAKI,MAAQK,MAChCI,OAASF,KAAKC,KAAKZ,KAAKc,OAASL,MAE9BtC,EAAI,EAAGA,EAAI0C,OAAQ1C,IAAK,CAC/BkC,IAAIC,QACJ,KAAK,GAAIS,GAAI,EAAGA,EAAIL,OAAQK,IAAK,CAI/B,IAAK,GAHCC,UAAWP,KAAOtC,EAClB8C,SAAWR,KAAOM,EACpBG,cACK5C,EAAI0C,SAAU1C,EAAI0C,SAAWP,KAAMnC,IAC1C,IAAK,GAAIW,GAAIgC,SAAUhC,EAAIgC,SAAWR,KAAMxB,IACtCuB,SAASlC,IAAMkC,SAASlC,GAAGW,GAC7BiC,WAAWZ,KAAKE,SAASlC,GAAGW,IAE5BiC,WAAWZ,MAAM,EAAG,EAAG,EAAG,GAKhCY,YAAaA,WAAWC,OAAO,SAAA3C,GAAA,MAAKA,GAAE,IACtC,IAAM4C,MAAO3B,IAAIyB,WAAWG,IAAI,SAAA7C,GAAA,MAAKA,GAAE,MACjC8C,KAAO7B,IAAIyB,WAAWG,IAAI,SAAA7C,GAAA,MAAKA,GAAE,MACjC+C,KAAO9B,IAAIyB,WAAWG,IAAI,SAAA7C,GAAA,MAAKA,GAAE,MACjCgD,KAAO/B,IAAIyB,WAAWG,IAAI,SAAA7C,GAAA,MAAKA,GAAE,KACvC6B,KAAIlC,GAAGmC,MACLmB,EAAGd,KAAKe,MAAMN,MACdO,EAAGhB,KAAKe,MAAMJ,MACdxB,EAAGa,KAAKe,MAAMH,MACd1B,EAAGc,KAAKe,MAAMF,SAIpB,MAAOnB,KA3DTuB,UAAY,SAAUC,GACpB,GAAMrB,UAAYT,aAAa8B,EAAE7B,MAC3B8B,UAAYvB,cAAcsB,EAAE7B,KAAMQ,SACxCuB,aAAYD","file":"6a9d0c7773ed68bb83a8.worker.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nonmessage = function onmessage(e) {\n  var rgbaData = calcRgbaData(e.data);\n  var pixelData = calcPixelData(e.data, rgbaData);\n  postMessage(pixelData);\n};\n\nfunction avg(arr) {\n  if (!arr || !arr.length) return 0;\n  return arr.reduce(function (a, b) {\n    return a + b;\n  }) / arr.length;\n}\n\nfunction calcRgbaData() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var imageData = data.imageData;\n  var width = data.width;\n  var res = [];\n  for (var i = 0; i < imageData.length; i += 4) {\n    if (i / 4 % width === 0) {\n      res.push([]);\n    }\n    res[res.length - 1].push([imageData[i], imageData[i + 1], imageData[i + 2], imageData[i + 3]]);\n  }\n  return res;\n}\n\nfunction calcPixelData(data, rgbaData) {\n  var res = [];\n  var size = data.size;\n  var colNum = Math.ceil(data.width / size);\n  var rowNum = Math.ceil(data.height / size);\n\n  for (var i = 0; i < rowNum; i++) {\n    res.push([]);\n    for (var j = 0; j < colNum; j++) {\n      var startCol = size * i;\n      var startRow = size * j;\n      var squareData = [];\n      for (var m = startCol; m < startCol + size; m++) {\n        for (var n = startRow; n < startRow + size; n++) {\n          if (rgbaData[m] && rgbaData[m][n]) {\n            squareData.push(rgbaData[m][n]);\n          } else {\n            squareData.push([0, 0, 0, 0]);\n          }\n        }\n      }\n\n      squareData = squareData.filter(function (d) {\n        return d[3];\n      });\n      var avgR = avg(squareData.map(function (d) {\n        return d[0];\n      }));\n      var avgG = avg(squareData.map(function (d) {\n        return d[1];\n      }));\n      var avgB = avg(squareData.map(function (d) {\n        return d[2];\n      }));\n      var avgA = avg(squareData.map(function (d) {\n        return d[3];\n      }));\n      res[i].push({\n        r: Math.round(avgR),\n        g: Math.round(avgG),\n        b: Math.round(avgB),\n        a: Math.round(avgA)\n      });\n    }\n  }\n  return res;\n}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// 6a9d0c7773ed68bb83a8.worker.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6a9d0c7773ed68bb83a8","onmessage = function (e) {\r\n  const rgbaData  = calcRgbaData(e.data);\r\n  const pixelData = calcPixelData(e.data, rgbaData);\r\n  postMessage(pixelData);\r\n};\r\n\r\nfunction avg(arr) {\r\n  if (!arr || !arr.length) return 0;\r\n  return arr.reduce((a, b) => a + b) / arr.length;\r\n}\r\n\r\nfunction calcRgbaData(data = {}) {\r\n  const imageData = data.imageData;\r\n  const width     = data.width;\r\n  const res       = [];\r\n  for (let i = 0; i < imageData.length; i += 4) {\r\n    if (i / 4 % width === 0) {\r\n      res.push([]);\r\n    }\r\n    res[res.length - 1].push([imageData[i], imageData[i + 1], imageData[i + 2], imageData[i + 3]]);\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction calcPixelData(data, rgbaData) {\r\n  const res    = [];\r\n  const size   = data.size;\r\n  const colNum = Math.ceil(data.width / size);\r\n  const rowNum = Math.ceil(data.height / size);\r\n\r\n  for (let i = 0; i < rowNum; i++) {\r\n    res.push([]);\r\n    for (let j = 0; j < colNum; j++) {\r\n      const startCol = size * i;\r\n      const startRow = size * j;\r\n      let squareData = [];\r\n      for (let m = startCol; m < startCol + size; m++) {\r\n        for (let n = startRow; n < startRow + size; n++) {\r\n          if (rgbaData[m] && rgbaData[m][n]) {\r\n            squareData.push(rgbaData[m][n]);\r\n          } else {\r\n            squareData.push([0, 0, 0, 0]);\r\n          }\r\n        }\r\n      }\r\n\r\n      squareData = squareData.filter(d => d[3]);\r\n      const avgR = avg(squareData.map(d => d[0]));\r\n      const avgG = avg(squareData.map(d => d[1]));\r\n      const avgB = avg(squareData.map(d => d[2]));\r\n      const avgA = avg(squareData.map(d => d[3]));\r\n      res[i].push({\r\n        r: Math.round(avgR),\r\n        g: Math.round(avgG),\r\n        b: Math.round(avgB),\r\n        a: Math.round(avgA),\r\n      });\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/calc.worker.js"],"sourceRoot":""}